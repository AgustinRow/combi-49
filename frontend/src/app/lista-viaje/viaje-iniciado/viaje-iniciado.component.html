<ng-template [ngIf]="usuarioIdentificado&&viajeEnCurso" [ngIfElse]="BlockSinViajeEnCurso">
    <nav class="navbar navbar-expand-sm justify-content-center bg-info navbar-dark">
        <ul class="navbar-nav">
            <li class="nav-item">
                <a class="nav-link" (click)="onSelect('Detalles')" [ngClass]="{ active: ver == 'Detalles'}">Detalles</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" (click)="onSelect('Vehiculo')" [ngClass]="{ active: ver == 'Vehiculo'}">Vehiculo</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" (click)="onSelect('Pasajeros')" [ngClass]="{ active: ver == 'Pasajeros'}">Pasajeros</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" (click)="onSelect('Viandas')" [ngClass]="{ active: ver == 'Viandas'}">Viandas</a>
            </li>
        </ul>
    </nav>

    <!-- Detalle del viaje -->
    <div *ngIf="ver == 'Detalles'">
        <div class="card">
            <div class="card-body">
                <app-viaje [viajeConInfo]="viajeEnCurso">Cargando</app-viaje>
            </div>
        </div>
    </div>

    <!-- Detalle del vehiculo -->
    <div *ngIf="ver == 'Vehiculo'">
        <div class="card">
            <div class="card-body">
                <app-vehiculo [vehiculoConInfo]="viajeEnCurso.Vehiculo[0]">Cargando</app-vehiculo>
            </div>
        </div>
    </div>

    <!-- Detalle de las viandas en el viaje -->
    <div *ngIf="ver == 'Viandas'">
        <div class="card">
            <div class="card-body">
                <h1>Lista de viandas por pasajero</h1>
            </div>
        </div>
    </div>

    <!-- Lista de pasajeros para el test -->
    <div *ngIf="ver == 'Pasajeros'">
        <div class="container">
            <!-- Test individuales -->
            <ng-template [ngIf]="showTestForm">
                <app-test-nuevo [pasaje]="listP[seleccionado]" (testNewEvent)="refreshList(); finalizarTest();" (closeEvent)="finalizarTest()">Carcando...</app-test-nuevo>
            </ng-template>

            <!-- Lista de todos los pasajeros -->
            <h2>Lista de pasajeros pendientes</h2>

            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text" id="basic-addon1"><i class="bi bi-search"></i></span>
                </div>
                <input type="text" class="form-control" name="findFirtName" [(ngModel)]="findString"
                    placeholder="Nombre, Apellido o DNI" autocomplete="off">
            </div>
            <table class="table  table-hover">
                <thead>
                    <tr scope="row">
                        <th>Nombre</th>
                        <th>Apellido</th>
                        <th>DNI</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let pasaje of listP | passageNameDniFilter: findString; index as i">
                        <td data-title="Nombre">{{pasaje.Pasajero.nombre}}</td>
                        <td data-title="Apellido">{{pasaje.Pasajero.apellido}}</td>
                        <td data-title="DNI">{{pasaje.Pasajero.dni}}</td>
                        <td data-title="Acciones">
                            <div class="btn-group">
                                <a class="btn btn-secondary" (click)="iniciarTest(i)">Test</a>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Lista de pasajeros con test completado-->
    <div *ngIf="ver == 'Pasajeros'">
        <div class="container">
            <!-- Test individuales -->
            <ng-template [ngIf]="showTestForm">
                <app-test-nuevo [pasaje]="listP[seleccionado]" (testNewEvent)="refreshList(); finalizarTest();" (closeEvent)="finalizarTest()">Carcando...</app-test-nuevo>
            </ng-template>

            <!-- Lista de todos los pasajeros -->
            <h2>Lista de pasajeros complatada</h2>
            <table class="table  table-hover">
                <thead>
                    <tr scope="row">
                        <th>Nombre</th>
                        <th>Apellido</th>
                        <th>DNI</th>
                        <th>Estado</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let pasaje of listP_completado">
                        <td data-title="Nombre">{{pasaje.Pasajero.nombre}}</td>
                        <td data-title="Apellido">{{pasaje.Pasajero.apellido}}</td>
                        <td data-title="DNI">{{pasaje.Pasajero.dni}}</td>
                        <td data-title="Estado">
                            <ng-template [ngIf]="pasaje.Test.resultado" [ngIfElse]="BlockResultadoNegativo">
                                Cancelado<!--  {{pasaje.Estado.estado}} -->
                            </ng-template>
                            <ng-template #BlockResultadoNegativo>
                                Puede viajar
                            </ng-template>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</ng-template>

<ng-template #BlockSinViajeEnCurso>
    <p>
        <ngb-alert type="danger" [dismissible]="false"><strong>Whoa!</strong> No tiene viajes en curso</ngb-alert>
    </p>
</ng-template>